/* empty css             *//* empty css               *//* empty css                *//* empty css                  */import{r as c}from"./request-4a7e5a78.js";/* empty css                  *//* empty css                *//* empty css                     *//* empty css               *//* empty css                   *//* empty css                     *//* empty css                *//* empty css                    */import{r as M,o as g,c as _,g as f,d as o,w as a,j as B,L as I,s as P,X as L,Y as $,W as F,k as m,Q as J,P as O,i as T,Z as A,E as p,$ as j,a1 as q,a2 as G,M as Q,a3 as W,a4 as X,J as Z}from"./index-b4448272.js";const H={class:"card",style:{"margin-bottom":"5px"}},K={class:"card",style:{"margin-bottom":"5px"}},R={style:{"margin-bottom":"10px"}},ee={key:0,class:"card"},oe={class:"dialog-footer"},be={__name:"GoodsStock",setup(te){const e=M({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],goodsName:null,goodsList:[]});c.get("/goods/selectAll").then(n=>{e.goodsList=n.data});const d=()=>{c.get("/goodsStock/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,goodsName:e.goodsName}}).then(n=>{var t,s;e.tableData=(t=n.data)==null?void 0:t.list,e.total=(s=n.data)==null?void 0:s.total})},b=()=>{e.form={},e.formVisible=!0},V=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},k=()=>{c.post("/goodsStock/add",e.form).then(n=>{n.code==="200"?(d(),p.success("操作成功"),e.formVisible=!1):p.error(n.msg)})},y=()=>{c.put("/goodsStock/update",e.form).then(n=>{n.code==="200"?(d(),p.success("操作成功"),e.formVisible=!1):p.error(n.msg)})},N=()=>{e.form.id?y():k()},E=n=>{A.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(t=>{c.delete("/goodsStock/delete/"+n).then(s=>{s.code==="200"?(d(),p.success("操作成功")):p.error(s.msg)})}).catch(t=>{})},h=()=>{e.goodsName=null,d()};return d(),(n,t)=>{const s=I,r=P,i=j,v=L,x=$,C=q,S=G,u=Q,w=W,D=X,U=Z,Y=F;return g(),_("div",null,[f("div",H,[o(s,{modelValue:e.goodsName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.goodsName=l),style:{width:"300px","margin-right":"10px"},placeholder:"请输入农产品名称查询"},null,8,["modelValue"]),o(r,{type:"primary",onClick:d},{default:a(()=>[m("查询")]),_:1}),o(r,{type:"info",style:{margin:"0 10px"},onClick:h},{default:a(()=>[m("重置")]),_:1})]),f("div",K,[f("div",R,[o(r,{type:"primary",onClick:b},{default:a(()=>[m("新增")]),_:1})]),o(v,{data:e.tableData,stripe:""},{default:a(()=>[o(i,{label:"农产品名称",prop:"goodsName"}),o(i,{label:"进货数量",prop:"num"}),o(i,{label:"进货渠道",prop:"channel"}),o(i,{label:"进货日期",prop:"date"}),o(i,{label:"备注",prop:"comment"}),o(i,{label:"操作","header-align":"center",width:"160"},{default:a(l=>[o(r,{type:"primary",onClick:z=>V(l.row)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),o(r,{type:"danger",onClick:z=>E(l.row.id)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(g(),_("div",ee,[o(x,{onCurrentChange:d,background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":t[1]||(t[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])])):B("",!0),o(Y,{title:"进货信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":t[9]||(t[9]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[f("span",oe,[o(r,{onClick:t[8]||(t[8]=l=>e.formVisible=!1)},{default:a(()=>[m("取 消")]),_:1}),o(r,{type:"primary",onClick:N},{default:a(()=>[m("保 存")]),_:1})])]),default:a(()=>[o(U,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(u,{label:"农产品",prop:"goodsId"},{default:a(()=>[o(S,{modelValue:e.form.goodsId,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.goodsId=l),placeholder:"请选择农产品",style:{width:"100%"}},{default:a(()=>[(g(!0),_(J,null,O(e.goodsList,l=>(g(),T(C,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"进货数量"},{default:a(()=>[o(w,{min:1,modelValue:e.form.num,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.num=l)},null,8,["modelValue"])]),_:1}),o(u,{label:"进货渠道"},{default:a(()=>[o(s,{modelValue:e.form.channel,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.channel=l),placeholder:"请输入进货渠道"},null,8,["modelValue"])]),_:1}),o(u,{label:"进货日期"},{default:a(()=>[o(D,{style:{width:"100%"},type:"date",modelValue:e.form.date,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.date=l),placeholder:"请选择进货日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),o(u,{label:"备注"},{default:a(()=>[o(s,{modelValue:e.form.comment,"onUpdate:modelValue":t[7]||(t[7]=l=>e.form.comment=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{be as default};
